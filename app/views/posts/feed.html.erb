<h1>Feed de Notícias</h1>

<%= render "form", post: @post %>
<br>

<% @posts.each do |post| %>
  <p><%= post.conteudo %></p>
  <% if current_user.likes.where(post_id: post.id).empty? %>
    <p>
      <%= link_to "Curtir", curtir_path(post_id: post.id),
        method: :patch %> (<%= post.likes.count %>)
    </p>
  <% else %>
    <p>
      <%= link_to "Descurtir", descurtir_path(post_id: post.id),
        method: :patch %> (<%= post.likes.count %>)
    </p>
  <% end %>
  <p>
    Escrito por <%= link_to post.usuario.nome,
    show_usuario_path(id: post.usuario.id) %>
  </p>
  <p>Última atualização: <%= post.ultima_atualizacao %></p>
  <p>
    <% if current_user == post.usuario %>
      <%= link_to "Editar", edit_post_path(post) %>
    <% end %>
    <% if current_user == post.usuario || current_user.admin %>
      <%= link_to "Excluir", post_path(post), method: :delete,
        data: { confirm: "Tem certeza?" } %>
    <% end %>
  </p>
  <br>

<% end %>

<%= will_paginate @posts %>
